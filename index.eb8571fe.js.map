{"mappings":"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","sources":["src/js/index.js","src/js/spinner.js","src/js/search_by_keywords.js","src/js/day-night.js"],"sourcesContent":["import './userAuth/firebase-auth-import';\nimport Spinner from './spinner';\nimport { saveGenres } from './genres_storage';\nimport { renderMarkupTrending } from './render_trending.js';\nimport { handleSubmit } from './search_by_keywords';\nimport './add_to_list';\nimport './modal-film';\nimport { onPlayVideo } from './play_trailer_btn';\nimport { openModalTrailer, closeModalTrailer } from './play_trailer_btn';\nimport { toggleModal, toggleCard } from './modal-team.js';\nsaveGenres()\n  .then(() => renderMarkupTrending())\n  .catch(error => console.log(error));\n// renderMarkupTrending();\nimport './day-night';\nconst formRef = document.querySelector('#search-form');\nformRef.addEventListener('submit', handleSubmit);\n// Экземпляр класса Spinner имеет 2 метода:\n// 1. spinner.enable() - выключает спинер\n// 2. spinner.disable() - включает спинер\nconst spinner = new Spinner({\n  selector: '[data-action=\"load-spinner\"]',\n});\nspinner.enable(); // сейчас спинер выключен\n","export default class Spinner {\n  constructor({ selector }) {\n    this.refs = this.getRefs(selector);\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.backdrop = document.querySelector(selector);\n    refs.spinner = refs.backdrop.querySelector('.spinner-grow');\n    return refs;\n  }\n\n  enable() {\n    this.refs.backdrop.classList.add('is-hidden');\n  }\n\n  disable() {\n    this.refs.backdrop.classList.remove('is-hidden');\n  }\n}\n","import { QueryHandler } from './query_handler';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { createCardMarkup } from './card_markup';\nimport localStorageMethod from './locale-storage-methods';\nimport Spinner from './spinner';\nimport { pagination } from './render_trending';\nimport localStorageMethod from './locale-storage-methods';\nimport { FILMS, LAST_REQUEST } from './localStorageKeys';\nimport { refs } from './refs';\n\nconst queryHandler = new QueryHandler();\nconst spinner = new Spinner({\n  selector: '[data-action=\"load-spinner\"]',\n});\n\nNotify.init({\n  timeout: 1500,\n  position: 'center-top',\n  backOverlay: false,\n  opacity: 0.8,\n  borderRadius: '25px',\n});\n\nexport async function handleSubmit(evt) {\n  evt.preventDefault();\n  const {\n    elements: { searchQuery },\n  } = evt.target;\n  const valueSearchQuery = searchQuery.value.trim().toLowerCase();\n  if (!valueSearchQuery) {\n    Notify.failure('Enter the name of the movie!');\n    return;\n  }\n\n  spinner.disable();\n  queryHandler.query = valueSearchQuery;\n  try {\n    const { results, total_results, page, total_pages } =\n      await queryHandler.fetchQueryResultsForMovieSearch();\n\n    if (!results.length) {\n      queryHandler.query = localStorageMethod.load(LAST_REQUEST);\n      return Notify.failure(\n        'Search result not successful. Enter the correct movie name.'\n      );\n    }\n\n    localStorageMethod.save(LAST_REQUEST, valueSearchQuery);\n    pagination.removeMarkup();\n    if (total_pages > 1) {\n      pagination.totalPages = total_pages;\n      pagination.page = page;\n      pagination.fetch = page =>\n        queryHandler.fetchQueryResultsForMovieSearch(page);\n\n      pagination.renderMarkup();\n    }\n    if (!results.length) {\n      Notify.failure(\n        'Search result not successful. Enter the correct movie name.'\n      );\n      spinner.enable();\n      return;\n    }\n\n    Notify.success(`Hooray! We found ${total_results} movie!`);\n\n    localStorageMethod.remove(FILMS);\n    localStorageMethod.save(FILMS, results);\n\n    const markup = results.map(createCardMarkup).join('');\n    refs.filmListRef.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    spinner.enable();\n  }\n}\n","document.querySelector('.themetoggle').addEventListener('click', event => {\n  event.preventDefault();\n  if (localStorage.getItem('theme') === 'dark') {\n    localStorage.removeItem('theme');\n  } else {\n    localStorage.setItem('theme', 'dark');\n  }\n  addDarkClassToHTML();\n});\n\nfunction addDarkClassToHTML() {\n  try {\n    if (localStorage.getItem('theme') === 'dark') {\n      document.querySelector('body').classList.add('dark');\n      document.querySelector('.hero').classList.add('dark');\n      document.querySelector('.themetoggle').classList.add('dark');\n      document.querySelector('.material-icons').classList.add('dark');\n      document.querySelector('header').classList.add('dark');\n      document.querySelector('.modal-dark').classList.add('dark');\n      document.querySelector('.day-nigth-btn-box').classList.add('dark');\n      document.querySelector('.container-footer').classList.add('dark');\n      document.querySelector('.card__container').classList.add('dark');\n      document.querySelector('.modal-film ').classList.add('dark');\n      document.querySelector('.card-list').classList.add('dark');\n      document.querySelector('.pagination__list').classList.add('dark');\n    } else {\n      document.querySelector('body').classList.remove('dark');\n      document.querySelector('.hero').classList.remove('dark');\n      document.querySelector('.themetoggle').classList.remove('dark');\n      document.querySelector('.material-icons').classList.remove('dark');\n      document.querySelector('header').classList.remove('dark');\n      document.querySelector('.modal-dark').classList.remove('dark');\n      document.querySelector('.day-nigth-btn-box').classList.remove('dark');\n      document.querySelector('.container-footer').classList.remove('dark');\n      document.querySelector('.card__container').classList.remove('dark');\n      document.querySelector('.modal-film ').classList.remove('dark');\n      document.querySelector('.card-list').classList.remove('dark');\n      document.querySelector('.pagination__list').classList.remove('dark');\n    }\n  } catch (err) {}\n}\n\naddDarkClassToHTML();\n"],"names":["parcelRequire","$00cfbbdd8a53f936$export$2e2bcd8739ae039","getRefs","selector","refs","backdrop","document","querySelector","spinner","enable","this","classList","add","disable","remove","constructor","$3iCpR","$6b76f21e10a2ef2f$var$queryHandler","QueryHandler","$6b76f21e10a2ef2f$var$spinner","$90794d70c88402d1$var$addDarkClassToHTML","localStorage","getItem","err","$iQIUW","Notify","init","timeout","position","backOverlay","opacity","borderRadius","addEventListener","event","preventDefault","removeItem","setItem","$bhaiH","saveGenres","then","$a3vHV","renderMarkupTrending","catch","error","console","log","async","evt","elements","searchQuery","target","valueSearchQuery","value","trim","toLowerCase","query","results","total_results","page","page1","total_pages","fetchQueryResultsForMovieSearch","length","$9SnYn","default","load","$7g6iB","LAST_REQUEST","failure","save","pagination","removeMarkup","totalPages","fetch","renderMarkup","success","FILMS","markup","map","$hPewW","createCardMarkup","join","$krGWQ","filmListRef","innerHTML"],"version":3,"file":"index.eb8571fe.js.map"}