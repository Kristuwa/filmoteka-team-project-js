{"mappings":"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","sources":["src/js/index.js","src/js/spinner.js","src/js/search_by_keywords.js","src/js/voiceSearch.js","src/js/day-night.js","src/js/filter.js"],"sourcesContent":["import './userAuth/firebase-auth-import';\nimport Spinner from './spinner';\nimport { saveGenres } from './genres_storage';\nimport { renderMarkupTrending } from './render_trending.js';\nimport './search_by_keywords';\nimport './voiceSearch'\nimport './add_to_list';\nimport './modal-film';\n\nimport { onPlayVideo } from './play_trailer_btn';\nimport { openModalTrailer, closeModalTrailer } from './play_trailer_btn';\nimport { toggleModal, toggleCard } from './modal-team.js';\nsaveGenres()\n  .then(() => renderMarkupTrending())\n  .catch(error => console.log(error));\n// renderMarkupTrending();\nimport './day-night';\n\n// Экземпляр класса Spinner имеет 2 метода:\n// 1. spinner.enable() - выключает спинер\n// 2. spinner.disable() - включает спинер\nconst spinner = new Spinner({\n  selector: '[data-action=\"load-spinner\"]',\n});\nspinner.enable(); // сейчас спинер выключен\n// Filter\nimport './filter'","export default class Spinner {\n  constructor({ selector }) {\n    this.refs = this.getRefs(selector);\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.backdrop = document.querySelector(selector);\n    refs.spinner = refs.backdrop.querySelector('.spinner-grow');\n    return refs;\n  }\n\n  enable() {\n    this.refs.backdrop.classList.add('is-hidden');\n  }\n\n  disable() {\n    this.refs.backdrop.classList.remove('is-hidden');\n  }\n}\n","import { QueryHandler } from './query_handler';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { createCardMarkup } from './card_markup';\nimport Spinner from './spinner';\nimport { pagination } from './render_trending';\nimport localStorageMethod from './locale-storage-methods';\nimport { FILMS, LAST_REQUEST } from './localStorageKeys';\nimport { refs } from './refs';\n\nconst queryHandler = new QueryHandler();\nconst spinner = new Spinner({\n  selector: '[data-action=\"load-spinner\"]',\n});\n\nrefs.searchForm.addEventListener('submit', handleSubmit);\n\nNotify.init({\n  timeout: 1500,\n  position: 'center-top',\n  backOverlay: false,\n  opacity: 0.8,\n  borderRadius: '25px',\n});\n\nexport async function handleSubmit(evt) {\n  evt.preventDefault();\n  const {\n    elements: { searchQuery },\n  } = evt.target;\n  const valueSearchQuery = searchQuery.value.trim().toLowerCase();\n  if (!valueSearchQuery) {\n    Notify.failure('Enter the name of the movie!');\n    return;\n  }\n\n  spinner.disable();\n  queryHandler.query = valueSearchQuery;\n  try {\n    const { results, total_results, page, total_pages } =\n      await queryHandler.fetchQueryResultsForMovieSearch();\n\n    if (!results.length) {\n      queryHandler.query = localStorageMethod.load(LAST_REQUEST);\n      return Notify.failure(\n        'Search result not successful. Enter the correct movie name.'\n      );\n    }\n\n    localStorageMethod.save(LAST_REQUEST, valueSearchQuery);\n    pagination.removeMarkup();\n    if (total_pages > 1) {\n      pagination.totalPages = total_pages;\n      pagination.page = page;\n      pagination.fetch = page =>\n        queryHandler.fetchQueryResultsForMovieSearch(page);\n\n      pagination.renderMarkup();\n    }\n    if (!results.length) {\n      Notify.failure(\n        'Search result not successful. Enter the correct movie name.'\n      );\n      spinner.enable();\n      return;\n    }\n\n    Notify.success(`Hooray! We found ${total_results} movie!`);\n\n    localStorageMethod.remove(FILMS);\n    localStorageMethod.save(FILMS, results);\n\n    const markup = results.map(createCardMarkup).join('');\n    refs.filmListRef.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    spinner.enable();\n  }\n}\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { refs } from \"./refs\";\nimport { createCardMarkup } from './card_markup';\nimport localStorageMethod from './locale-storage-methods';\nimport { FILMS, LAST_REQUEST } from './localStorageKeys';\nimport { QueryHandler } from './query_handler';\nimport {pagination} from './render_trending'\nconst queryHandlerVoice = new QueryHandler();\n\n// The speech recognition interface lives on the browser’s window object\nconst SpeechRecognition =\n  window.SpeechRecognition || window.webkitSpeechRecognition; // if none exists -> undefined\nif (SpeechRecognition) {\n  console.log('Your Browser supports speech Recognition');\n\n  const recognition = new SpeechRecognition();\n\n  recognition.continuous = true;\n  recognition.lang = 'en-US';\n\n  const micBtn = document.querySelector('.search-btn__mic');\n  const micIcon = micBtn.firstElementChild;\n\n  micBtn.addEventListener('click', micBtnClick);\n  function micBtnClick() {\n    console.log('yes');\n    if (micIcon.classList.contains('mic-stop')) {\n      // Start Voice Recognition\n      recognition.start(); // First time you have to allow access to mic!\n    } else {\n      recognition.stop();\n    }\n  }\n\n  recognition.addEventListener('start', startSpeechRecognition); // <=> recognition.onstart = function() {...}\n  function startSpeechRecognition() {\n    micIcon.classList.remove('mic-stop');\n    micIcon.classList.add('mic-rec');\n    refs.info.classList.add('search-form__info--hover');\n    refs.searchFormInput.focus();\n    console.log('Voice activated, SPEAK');\n  }\n\n  recognition.addEventListener('end', endSpeechRecognition); // <=> recognition.onend = function() {...}\n  function endSpeechRecognition() {\n    micIcon.classList.remove('mic-rec');\n    micIcon.classList.add('mic-stop');\n    refs.info.classList.remove('search-form__info--hover');\n    refs.searchFormInput.focus();\n    console.log('Speech recognition service disconnected');\n  }\n\n  recognition.addEventListener('result', resultOfSpeechRecognition); // <=> recognition.onresult = function(event) {...} - Fires when you stop talking\n  function resultOfSpeechRecognition(e) {\n    const { searchFormInput } = refs;\n\n    const current = e.resultIndex;\n    const transcript = e.results[current][0].transcript;\n\n    \n     if (!searchFormInput.value) {\n      searchFormInput.value = transcript;\n    } else {\n      if (transcript.toLowerCase().trim() === 'search') {\n        onSearch();\n        recognition.stop();\n      } else if (transcript.toLowerCase().trim() === 'reset') {\n        searchFormInput.value = '';\n      } else {\n        searchFormInput.value = transcript;\n      }\n    }\n  }\n  refs.info.textContent = 'Voice Commands: \"reset\", \"search\"';\n} else {\n  console.log('Your Browser does not support speech Recognition');\n  refs.info.textContent = 'Your Browser does not support Speech Recognition';\n}\n\n\nasync function onSearch() {\n  const valueSearchQuery = refs.searchFormInput.value.trim().toLowerCase();\n\n  queryHandlerVoice.query = valueSearchQuery;\n\n  try {\n    const { results, total_results, page, total_pages } =\n      await queryHandlerVoice.fetchQueryResultsForMovieSearch();\n\n    if (!results.length) {\n      queryHandlerVoice.query = localStorageMethod.load(LAST_REQUEST);\n      return Notify.failure(\n        'Search result not successful. Enter the correct movie name.'\n      );\n    }\n\n    localStorageMethod.save(LAST_REQUEST, valueSearchQuery);\n    pagination.removeMarkup();\n    if (total_pages > 1) {\n      pagination.totalPages = total_pages;\n      pagination.page = page;\n      pagination.fetch = page =>\n        queryHandlerVoice.fetchQueryResultsForMovieSearch(page);\n\n      pagination.renderMarkup();\n    }\n    if (!results.length) {\n      Notify.failure(\n        'Search result not successful. Enter the correct movie name.'\n      );\n      return;\n    }\n\n    Notify.success(`Hooray! We found ${total_results} movie!`);\n\n    localStorageMethod.remove(FILMS);\n    localStorageMethod.save(FILMS, results);\n\n    const markup = results.map(createCardMarkup).join('');\n    refs.filmListRef.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","document.querySelector('.themetoggle').addEventListener('click', event => {\n  event.preventDefault();\n  if (localStorage.getItem('theme') === 'dark') {\n    localStorage.removeItem('theme');\n  } else {\n    localStorage.setItem('theme', 'dark');\n  }\n  addDarkClassToHTML();\n});\n\nfunction addDarkClassToHTML() {\n  try {\n    if (localStorage.getItem('theme') === 'dark') {\n      document.querySelector('body').classList.add('dark');\n      document.querySelector('.hero').classList.add('dark');\n      document.querySelector('.themetoggle').classList.add('dark');\n      document.querySelector('.material-icons').classList.add('dark');\n      document.querySelector('header').classList.add('dark');\n      document.querySelector('.modal-dark').classList.add('dark');\n      document.querySelector('.day-nigth-btn-box').classList.add('dark');\n      document.querySelector('.container-footer').classList.add('dark');\n      document.querySelector('.card__container').classList.add('dark');\n      document.querySelector('.modal-film ').classList.add('dark');\n      document.querySelector('.card-list').classList.add('dark');\n      document.querySelector('.pagination__list').classList.add('dark');\n    } else {\n      document.querySelector('body').classList.remove('dark');\n      document.querySelector('.hero').classList.remove('dark');\n      document.querySelector('.themetoggle').classList.remove('dark');\n      document.querySelector('.material-icons').classList.remove('dark');\n      document.querySelector('header').classList.remove('dark');\n      document.querySelector('.modal-dark').classList.remove('dark');\n      document.querySelector('.day-nigth-btn-box').classList.remove('dark');\n      document.querySelector('.container-footer').classList.remove('dark');\n      document.querySelector('.card__container').classList.remove('dark');\n      document.querySelector('.modal-film ').classList.remove('dark');\n      document.querySelector('.card-list').classList.remove('dark');\n      document.querySelector('.pagination__list').classList.remove('dark');\n    }\n  } catch (err) {}\n}\n\naddDarkClassToHTML();\n","import axios from 'axios';\nimport { MOVIEDB_KEY } from './query_handler';\nimport storage from './locale-storage-methods';\nimport {FILMS} from './localStorageKeys';\nimport { createCardMarkup } from './card_markup';\nimport { refs } from './refs';\nimport { filterItem } from './refs';\nimport { renderMarkupTrending, pagination, onChangePageClick} from './render_trending'\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport './modal-film';\n\nconst BASE_URL = 'https://api.themoviedb.org/3/'\n\n// Слухачі подій\n\nfilterItem.genreForm.addEventListener('input', eventGenre);\nfilterItem.yearForm.addEventListener('input', eventYear);\nfilterItem.resetButton.addEventListener('click', onResetSearch);\n\nrefs.pagination.removeEventListener('click', onChangePageClick);\nrefs.pagination.addEventListener('click', onChangePageOfFilterClick);\n\n// Змінні для запиту на бекенд\nlet formSearch = {\n  year: '',\n  genre: '',\n  query: '',\n  discover: `trending`,\n  page: '',\n};\n\n\n//Пошук рендер фильму по жанру __________________________\nasync function eventGenre(evt) {\n  evt.preventDefault();\n  console.log(evt);\n  if (evt.target.value !== formSearch.genre || !formSearch.genre) {\n    pagination.resetPage();\n  }\n\n  if (evt) {\n    formSearch.genre = evt.target.value;\n    // console.log('genre id:', evt.target.value);\n    // formSearch.page = 1;\n\n\n    await getSearchForm(formSearch.genre, formSearch.year, pagination.page)\n      .then(data => {\n\n\n        if (data.results.length !== 0) {\n          refs.filmListRef.innerHTML = '';\n          // console.log('видаляємо фільми зі сторінки');\n          const markup = data.results.map(createCardMarkup).join('');\n          refs.filmListRef.innerHTML = markup;\n          // console.log('create markup');\n          \n        } else {\n         \n          Notify.failure(`Nothing was found for your request`);\n \n        }\n      })\n      .catch(error => console.log(error))\n\n  }\n}\n\n\n// Пошук і рендер фільмів по роках __________________________\nasync function eventYear(evt) {\n  evt.preventDefault();\n  if (evt.target.value !== formSearch.year || !formSearch.year) {\n    pagination.resetPage();\n  }\n  // якщо евент не пустий, то беремо значення з форми\n  if (evt) {\n    formSearch.year = Number(evt.target.value);\n    // formSearch.page = 1;\n\n    await getSearchForm(formSearch.genre, formSearch.year, pagination.page)\n      .then(data => {\n\n        if (data.results.length !== 0) {\n          refs.filmListRef.innerHTML = '';\n          // console.log('видаляємо фільми зі сторінки');\n          const markup = data.results.map(createCardMarkup).join('');\n          refs.filmListRef.innerHTML = markup;\n          // console.log('create markup');\n        } else {\n\n          Notify.failure(`Nothing was found for your request`);\n        };\n      }).catch(error => console.log(error))\n  };\n};\n\n\n// Запит на бекенд по жанру або року __________________________\nexport async function getSearchForm(\n  genre = '',\n  year = '',\n  pageNumber = '',\n  query = ''\n) {\n\n  // якщо значення фільтра не дорівнює Start або рік не дорінвює ''\n  // то в запит підставляємо рік вибраний у формі\n  formSearch.year =\n    filterItem.yearForm.value !== 'start' || year !== ''\n      ? `&primary_release_year=${filterItem.yearForm.value}`\n      : '';\n  \n// ✅ якщо значення фільтра не дорівнює '' та не дорівнює start\n// то в запит підставляємо значення вибране у формі\n  formSearch.genre =\n    genre !== '' && filterItem.genreForm.value !== 'start'\n      ? `&with_genres=${filterItem.genreForm.value}`\n      : '';\n  // console.log(formSearch.genre);\n  \n  formSearch.query = `&query=${query}`;\n  // console.log(query);\n  // formSearch.page = page !== 0 || page !== '' ? `&page=${page}` : '';\n\n  if (query === '') {\n    formSearch.queryFetch = '';\n    // console.log(formSearch);\n  }\n  if (query !== '' && genre === '') {\n    formSearch.discover = 'search';\n  }\n  if (query === '' && genre !== '') {\n    formSearch.discover = 'discover';\n  }\n  if (query === '' && year !== '') {\n    formSearch.discover = 'discover';\n  }\n  const url = `${BASE_URL}${formSearch.discover}/movie?api_key=${MOVIEDB_KEY}&sort_by=popularity.desc${formSearch.genre}${formSearch.year}&include_adult=false&page=${pageNumber}`\n   // Перевірка рядка запиту\n  // console.log(url);\n\n  // Запит\n  const fetchCard = await axios.get(url);\n  const { total_pages, page, results } = fetchCard.data;\n  // Записуємо результат запиту у localstorage\n  // storage.save('resultFilterItems', fetchCard.data.results)\n  storage.save('films', results)\n//  Записуємо загальну кількість результатів\n  storage.save('totalItems', total_pages);\n// Записуємо кількість за один запит\n  storage.save('itemsPerPage', results.length);\n\n  // Пагінація\n  if (total_pages > 1) {\n        pagination.totalPages = total_pages;\n        pagination.page = page;\n        pagination.fetch = page =>\n          getSearchForm(formSearch.genre, formSearch.year, page);\n        pagination.renderMarkup();\n  }\n  \n  return fetchCard.data;\n}\n\n\n//Створення і рендер розмітки в select YEAR ___________________\nfunction createSelectOptions() {\n  let arrayYear = [];\n  const date = new Date();\n\n  for (let i = date.getFullYear(); i >= 1950; i -= 1) {\n    arrayYear.push(\n      `<option class = 'filter__form-years' value=\"${i}\">${i}</option>`\n    );\n  }\n  const elements = arrayYear.join('');\n  filterItem.yearForm.insertAdjacentHTML('beforeend', elements);\n};\n\n\n// Скидання фільтру по кнопці reset\nfunction onResetSearch(evt) {\n  evt.preventDefault();\n  pagination.resetPage();\n  filterItem.genreForm.options.selectedIndex = 0;\n  filterItem.yearForm.options.selectedIndex = 0;\n  formSearch.genre = '';\n  formSearch.year = '';\n  formSearch.page = 1;\n  refs.filmListRef.innerHTML = '';\n  renderMarkupTrending()\n}\ncreateSelectOptions();\n\n// Пагінація _________________________________________\n\n\nexport function onChangePageOfFilterClick(e) {\n  if (e.target.nodeName === 'UL') {\n    return;\n  }\n  if (e.target.className === 'btn__next') {\n    pagination.incrementPage();\n  }\n  if (e.target.className === 'btn__prev') {\n    pagination.decrementPage();\n  }\n  if (e.target.className === 'dots') {\n    return;\n  }\n  if (e.target.className === 'num') {\n    pagination.page = Number(e.target.textContent);\n  }\n  \n  \n  pagination\n    .fetch(pagination.page)\n    .then(({ results }) => {\n      console.log(results);\n      console.log(pagination.fetch);\n      const markup = results.map(createCardMarkup).join('');\n      storage.save(FILMS, results);\n      refs.filmListRef.innerHTML = markup;\n    })\n    .catch(error => console.log(error));\n\n  pagination.renderMarkup();\n}\n"],"names":["parcelRequire","$00cfbbdd8a53f936$export$2e2bcd8739ae039","getRefs","selector","refs","backdrop","document","querySelector","spinner","enable","this","classList","add","disable","remove","constructor","$3iCpR","$6b76f21e10a2ef2f$var$queryHandler","QueryHandler","$6b76f21e10a2ef2f$var$spinner","$krGWQ","searchForm","addEventListener","async","evt","preventDefault","elements","searchQuery","target","valueSearchQuery","value","trim","toLowerCase","$iQIUW","Notify","failure","query","results","total_results","page","page1","total_pages","fetchQueryResultsForMovieSearch","length","$9SnYn","default","load","$7g6iB","LAST_REQUEST","save","$a3vHV","pagination","removeMarkup","totalPages","fetch","renderMarkup","success","FILMS","markup","map","$hPewW","createCardMarkup","join","filmListRef","innerHTML","error","console","log","init","timeout","position","backOverlay","opacity","borderRadius","$1e6352765aa90164$var$queryHandlerVoice","$1e6352765aa90164$var$SpeechRecognition","window","SpeechRecognition","webkitSpeechRecognition","recognition","continuous","lang","micBtn","micIcon","firstElementChild","contains","start","stop","info","searchFormInput","focus","e","current","resultIndex","transcript","$1e6352765aa90164$var$onSearch","textContent","$90794d70c88402d1$var$addDarkClassToHTML","localStorage","getItem","err","event","removeItem","setItem","$2shzp","filterItem","genreForm","$cc8167df025acb14$var$formSearch","genre","resetPage","$cc8167df025acb14$export$2e257b03c00505f4","year","then","data","catch","yearForm","Number","resetButton","options","selectedIndex","renderMarkupTrending","removeEventListener","onChangePageClick","nodeName","className","incrementPage","decrementPage","discover","pageNumber","queryFetch","url","MOVIEDB_KEY","fetchCard","get","arrayYear","i","Date","getFullYear","push","insertAdjacentHTML","$cc8167df025acb14$var$createSelectOptions","$bhaiH","saveGenres"],"version":3,"file":"index.5eac8e5b.js.map"}