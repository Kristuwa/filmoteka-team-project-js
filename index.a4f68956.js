var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var a=r[e];delete r[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},e.parcelRequired7c6=a),a("OBL1B");class o{getRefs(e){const t={};return t.backdrop=document.querySelector(e),t.spinner=t.backdrop.querySelector(".spinner-grow"),t}enable(){this.refs.backdrop.classList.add("is-hidden")}disable(){this.refs.backdrop.classList.remove("is-hidden")}constructor({selector:e}){this.refs=this.getRefs(e)}}var n=a("bhaiH"),s=a("a3vHV"),i=a("3iCpR"),c=a("iQIUW"),l=a("hPewW"),d=(s=a("a3vHV"),a("9SnYn")),u=a("7g6iB"),f=a("krGWQ");const m=new(0,i.QueryHandler),g=new o({selector:'[data-action="load-spinner"]'});f.refs.searchForm.addEventListener("submit",(async function(e){e.preventDefault();const{elements:{searchQuery:t}}=e.target,r=t.value.trim().toLowerCase();if(!r)return void c.Notify.failure("Enter the name of the movie!");g.disable(),m.query=r;try{const{results:e,total_results:t,page:a,total_pages:o}=await m.fetchQueryResultsForMovieSearch();if(!e.length)return m.query=d.default.load(u.LAST_REQUEST),c.Notify.failure("Search result not successful. Enter the correct movie name.");if(d.default.save(u.LAST_REQUEST,r),s.pagination.removeMarkup(),o>1&&(s.pagination.totalPages=o,s.pagination.page=a,s.pagination.fetch=e=>m.fetchQueryResultsForMovieSearch(e),s.pagination.renderMarkup()),!e.length)return c.Notify.failure("Search result not successful. Enter the correct movie name."),void g.enable();c.Notify.success(`Hooray! We found ${t} movie!`),d.default.remove(u.FILMS),d.default.save(u.FILMS,e);const n=e.map(l.createCardMarkup).join("");f.refs.filmListRef.innerHTML=n}catch(e){console.log(e)}finally{g.enable()}})),c.Notify.init({timeout:1500,position:"center-top",backOverlay:!1,borderRadius:"25px"});c=a("iQIUW"),f=a("krGWQ"),l=a("hPewW"),d=a("9SnYn"),u=a("7g6iB"),i=a("3iCpR"),s=a("a3vHV");const p=new(0,i.QueryHandler),v=window.SpeechRecognition||window.webkitSpeechRecognition;if(v){console.log("Your Browser supports speech Recognition");const e=new v;e.continuous=!0,e.lang="en-US";const t=document.querySelector(".search-btn__mic"),r=t.firstElementChild;t.addEventListener("click",(function(){console.log("yes"),r.classList.contains("mic-stop")?e.start():e.stop()})),e.addEventListener("start",(function(){r.classList.remove("mic-stop"),r.classList.add("mic-rec"),f.refs.info.classList.add("search-form__info--hover"),f.refs.searchFormInput.focus(),console.log("Voice activated, SPEAK")})),e.addEventListener("end",(function(){r.classList.remove("mic-rec"),r.classList.add("mic-stop"),f.refs.info.classList.remove("search-form__info--hover"),f.refs.searchFormInput.focus(),console.log("Speech recognition service disconnected")})),e.addEventListener("result",(function(t){const{searchFormInput:r}=f.refs,a=t.resultIndex,o=t.results[a][0].transcript;r.value?"search"===o.toLowerCase().trim()?(!async function(){const e=f.refs.searchFormInput.value.trim().toLowerCase();p.query=e;try{const{results:t,total_results:r,page:a,total_pages:o}=await p.fetchQueryResultsForMovieSearch();if(!t.length)return p.query=d.default.load(u.LAST_REQUEST),c.Notify.failure("Search result not successful. Enter the correct movie name.");if(d.default.save(u.LAST_REQUEST,e),s.pagination.removeMarkup(),o>1&&(s.pagination.totalPages=o,s.pagination.page=a,s.pagination.fetch=e=>p.fetchQueryResultsForMovieSearch(e),s.pagination.renderMarkup()),!t.length)return void c.Notify.failure("Search result not successful. Enter the correct movie name.");c.Notify.success(`Hooray! We found ${r} movie!`),d.default.remove(u.FILMS),d.default.save(u.FILMS,t);const n=t.map(l.createCardMarkup).join("");f.refs.filmListRef.innerHTML=n}catch(e){console.log(e)}}(),e.stop()):"reset"===o.toLowerCase().trim()?r.value="":r.value=o:r.value=o})),f.refs.info.textContent='Voice Commands: "reset", "search"'}else console.log("Your Browser does not support speech Recognition"),f.refs.info.textContent="Your Browser does not support Speech Recognition";function h(){try{"dark"===localStorage.getItem("theme")?(document.querySelector("body").classList.add("dark"),document.querySelector(".hero").classList.add("dark"),document.querySelector(".themetoggle").classList.add("dark"),document.querySelector(".material-icons").classList.add("dark"),document.querySelector("header").classList.add("dark"),document.querySelector(".modal-dark").classList.add("dark"),document.querySelector(".day-nigth-btn-box").classList.add("dark"),document.querySelector(".container-footer").classList.add("dark"),document.querySelector(".card__container").classList.add("dark"),document.querySelector(".modal-film ").classList.add("dark"),document.querySelector(".card-list").classList.add("dark"),document.querySelector(".pagination__list").classList.add("dark")):(document.querySelector("body").classList.remove("dark"),document.querySelector(".hero").classList.remove("dark"),document.querySelector(".themetoggle").classList.remove("dark"),document.querySelector(".material-icons").classList.remove("dark"),document.querySelector("header").classList.remove("dark"),document.querySelector(".modal-dark").classList.remove("dark"),document.querySelector(".day-nigth-btn-box").classList.remove("dark"),document.querySelector(".container-footer").classList.remove("dark"),document.querySelector(".card__container").classList.remove("dark"),document.querySelector(".modal-film ").classList.remove("dark"),document.querySelector(".card-list").classList.remove("dark"),document.querySelector(".pagination__list").classList.remove("dark"))}catch(e){}}a("a3DhO"),a("fQE3M"),a("kDD30"),a("kDD30"),a("7bYU0"),document.querySelector(".themetoggle").addEventListener("click",(e=>{e.preventDefault(),"dark"===localStorage.getItem("theme")?localStorage.removeItem("theme"):localStorage.setItem("theme","dark"),h()})),h();var y=a("2shzp");i=a("3iCpR"),d=a("9SnYn"),u=a("7g6iB"),l=a("hPewW"),f=a("krGWQ"),f=a("krGWQ"),s=a("a3vHV"),c=a("iQIUW");a("fQE3M");f.filterItem.genreForm.addEventListener("input",(async function(e){e.preventDefault(),console.log(e),e.target.value===L.genre&&L.genre||s.pagination.resetPage();e&&(L.genre=e.target.value,await S(L.genre,L.year,s.pagination.page).then((e=>{if(0!==e.results.length){f.refs.filmListRef.innerHTML="";const t=e.results.map(l.createCardMarkup).join("");f.refs.filmListRef.innerHTML=t}else c.Notify.failure("Nothing was found for your request")})).catch((e=>console.log(e))))})),f.filterItem.yearForm.addEventListener("input",(async function(e){e.preventDefault(),e.target.value===L.year&&L.year||s.pagination.resetPage();e&&(L.year=Number(e.target.value),await S(L.genre,L.year,s.pagination.page).then((e=>{if(0!==e.results.length){f.refs.filmListRef.innerHTML="";const t=e.results.map(l.createCardMarkup).join("");f.refs.filmListRef.innerHTML=t}else c.Notify.failure("Nothing was found for your request")})).catch((e=>console.log(e))))})),f.filterItem.resetButton.addEventListener("click",(function(e){e.preventDefault(),s.pagination.resetPage(),f.filterItem.genreForm.options.selectedIndex=0,f.filterItem.yearForm.options.selectedIndex=0,L.genre="",L.year="",L.page=1,f.refs.filmListRef.innerHTML="",(0,s.renderMarkupTrending)()})),f.refs.pagination.removeEventListener("click",s.onChangePageClick),f.refs.pagination.addEventListener("click",(function(e){if("UL"===e.target.nodeName)return;"btn__next"===e.target.className&&s.pagination.incrementPage();"btn__prev"===e.target.className&&s.pagination.decrementPage();if("dots"===e.target.className)return;"num"===e.target.className&&(s.pagination.page=Number(e.target.textContent));s.pagination.fetch(s.pagination.page).then((({results:e})=>{console.log(e),console.log(s.pagination.fetch);const t=e.map(l.createCardMarkup).join("");d.default.save(u.FILMS,e),f.refs.filmListRef.innerHTML=t})).catch((e=>console.log(e))),s.pagination.renderMarkup()}));let L={year:"",genre:"",query:"",discover:"trending",page:""};async function S(e="",t="",r="",a=""){L.year="start"!==f.filterItem.yearForm.value||""!==t?`&primary_release_year=${f.filterItem.yearForm.value}`:"",L.genre=""!==e&&"start"!==f.filterItem.genreForm.value?`&with_genres=${f.filterItem.genreForm.value}`:"",L.query=`&query=${a}`,""===a&&(L.queryFetch=""),""!==a&&""===e&&(L.discover="search"),""===a&&""!==e&&(L.discover="discover"),""===a&&""!==t&&(L.discover="discover");const o=`https://api.themoviedb.org/3/${L.discover}/movie?api_key=${i.MOVIEDB_KEY}&sort_by=popularity.desc${L.genre}${L.year}&include_adult=false&page=${r}`,n=await y.default.get(o),{total_pages:c,page:l,results:u}=n.data;return d.default.save("films",u),d.default.save("totalItems",c),d.default.save("itemsPerPage",u.length),c>1&&(s.pagination.totalPages=c,s.pagination.page=l,s.pagination.fetch=e=>S(L.genre,L.year,e),s.pagination.renderMarkup()),n.data}!function(){let e=[];for(let t=(new Date).getFullYear();t>=1950;t-=1)e.push(`<option class = 'filter__form-years' value="${t}">${t}</option>`);const t=e.join("");f.filterItem.yearForm.insertAdjacentHTML("beforeend",t)}(),(0,n.saveGenres)().then((()=>(0,s.renderMarkupTrending)())).catch((e=>console.log(e)));new o({selector:'[data-action="load-spinner"]'}).enable();
//# sourceMappingURL=index.a4f68956.js.map
